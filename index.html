<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Mapa</title>
    <link rel="stylesheet" type="text/css" href="/assets/css/styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="assets/js/main.js">
</head>

<body>
    <div id="map"></div>
    
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    
    
    <div id="title">
        <!--Esta barra de busqueda va arriba-->
        <!--Solucionar el margen del top que no cuadra bien-->
        <h1 id="mainTitle">FireSpotter</h1>
    </div>
    <div id="logoNasa">
        <img src="/assets/img/nasa_logo.png" alt="logo of Corp" id="nasaImg">
    </div>

    <div id="logoWeb">
        <img src="/assets/img/logoWeb.jpeg" alt="logo of our Web" id="webImg">
    </div>
    
    <div id="lowIcons">
        <div id="scale">
            <!--este tiene que ser de color transparente-->
            <p>aquiEscala</p>
        </div>
        <div id="selfPosition">
            <!--aqui va la posicion propia. Cuando lo tocamos, vuelve a ponernos en el centro del mapa-->
            <button id="getLocationButton">Obtener Ubicación</button>

        </div>
    </div>
    


    <script>
        // Crear un mapa
        var map = L.map('map').setView([40.41831, -3.70275], 6);
 
 
        // Agregar una capa de mapa físico
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
 
 
        function showCurrentLocation() {
            if ("geolocation" in navigator) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    var lat = position.coords.latitude;
                    var lng = position.coords.longitude;

                    // Crear un marcador en la ubicación actual
                    var marker = L.marker([lat, lng]).addTo(map);
                    map.setView([lat, lng], 15); // Centrar el mapa en la ubicación actual
                });
            } else {
                alert("Tu navegador no admite la geolocalización.");
            }
        }

        // Coordenadas correspondientes a los puntos a añadir
        var redPoints = [
            [40.7128, -74.0060],
            [40.7200, -73.9950],
            [40.7300, -74.0100]
        ];

        // Función para agregar marcadores rojos en las coordenadas especificadas
        function addRedMarkers() {
            for (var i = 0; i < redPoints.length; i++) {
                var redMarker = L.marker(redPoints[i], {icon: redIcon}).addTo(map);
            }
        }

        // Crear un icono rojo personalizado para los marcadores
        var redIcon = L.icon({
            iconUrl: 'file:///home/hernan/Descargas/5a29e1a37a9239.5983790215126941795021.png',
            iconSize: [25, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34],
            shadowSize: [41, 41]
        });


        // Agregar un controlador de eventos al botón
        var getLocationButton = document.getElementById("getLocationButton");
        getLocationButton.addEventListener("click", showCurrentLocation);

        //Llamar a la funcion que añade puntos en el mapa
        addRedMarkers();
    </script>
    
    <div id="title">
        <!--Esta barra de busqueda va arriba-->
        <!--Solucionar el margen del top que no cuadra bien-->
        <h1 id="mainTitle">FireSpotter</h1>
    </div>
    
    <div id="lowIcons">
        <div id="scale">
            <!--este tiene que ser de color transparente-->
            <p>aquiEscala</p>
        </div>
        <div id="selfPosition">
            <!--aqui va la posicion propia. Cuando lo tocamos, vuelve a ponernos en el centro del mapa-->
            <p>aquiPosicionota</p>

        </div>
    </div>
    




</body>

</html>